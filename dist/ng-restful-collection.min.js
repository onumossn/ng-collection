angular.module("ngRestfulCollection",[]).provider("$collection",function(){this.defaults={preRequest:null,collectionKey:"data",idKey:"id"},this.$get=["$q","$http","$filter","$cacheFactory","$injector","$resourceLibrary",function(a,b,c,d,e,f){function g(a,b){this._meta={url:f.get(a),params:angular.copy(b)},this.data={collection:[]}}function h(b){return a.reject(b)}function i(a,b){return a+"/"+b}function j(a,b){var c=l(a,b[o.idKey]);c?angular.extend(c,b):a.push(b)}function k(a,b){var c={};return c[a]=b,c}function l(a,b){return c("filter")(self.data.collection,k(o.idKey,b))[0]}function m(a){var b="";return angular.forEach(a[1],function(a,c){b+=c+a}),a[0]+b}var n=d("ng-restful-collection"),o=this.defaults,p=p?e.get(p):{run:function(){a.when(!0)}};return g.prototype.get=function(a){var c=this,d=a[o.idKey]?i(c.meta.url,a[o.idKey]):c.meta.url;return a=angular.copy(a||{}),a[o.idKey]||angular.extend(a,c.meta.params),p.run().then(function(){return b.get(d,{params:a})},h).then(function(b){var d;return a[o.idKey]?(j(c.data.collection,b),d=angular.copy(b)):(c.data.collection=resp[o.collectionKey]||[],d=angular.copy(c.data.collection)),d},h)},g.prototype.save=function(a){var c=this,d=i(c.meta.url,a[o.idKey]);return p.run().then(function(){var c=a[o.idKey]?"put":"post";return b[c](d,a)},h).then(function(a){return j(c.data.collection,a),angular.copy(a)},h)},g.prototype.remove=function(a){var c=this;return p.run().then(function(){return b["delete"](i(c.meta.url,a[o.idKey]))},h).then(function(){var b=l(c.data.collection,a[o.idKey]),d=c.data.collection.indexOf(b);c.data.collection.splice(d,1)},h)},function(a,b){var c=m(arguments),d=n.get(c);if(d)return d;var e=new g(a,b);return n.set(c,e),e}}]}).provider("$resourceLibrary",function(){this.defaults={baseLinks:{}},this.$get=["$cacheFactory",function(a){function b(a,b){a=a?a+".":"",angular.isObject(b)?b.forEach(function(b,c){d.put(a+c,b)}):angular.isArray(b)&&b.forEach(function(b){d.put(a+b.rel,b.url)})}var c=this.defaults,d=a("resource-library");return b("",c.baseLinks),{extend:b,get:d.get}}]}).controller("ngRestfulCollectionCtrl",["$scope","$attrs","$parse","$collection",function(a,b,c,d){function e(a){return a.replace(/\./g," ").replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(a,b){return 0===b?a.toLowerCase():a.toUpperCase()})}function f(a){return function(b){a&&a(b)}}var g=c(b.ngRestfulCollection)(a);a.getEditCopy=angular.copy,angular.forEach(g,function(b){var c=d(b.type,b.params),g=e(b.type);a[g]=angular.extend({data:c.data,save:function(a,b,d){c.save(a).then(f(b),f(d))},remove:function(a,b,d){c.remove(a).then(f(b),f(d))}},a[g]),c.get()})}]).directive("ngRestfulCollection",function(){return{restrict:"A",controller:"ngRestfulCollectionCtrl"}});
//# sourceMappingURL=ng-restful-collection.min.map