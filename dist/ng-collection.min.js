angular.module("ngCollection",[]).provider("$collection",function(){this.defaults={authServiceName:null,collectionKey:"data",idKey:"id"},this.$get=function(a,b,c,d,e,f){function g(a,b){this.meta={url:f.get(a),params:angular.copy(b)},this.data={collection:[]}}function h(a,b){return a+"/"+b}function i(a,b){var c=k(a,b[n.idKey]);c?angular.extend(c,b):a.push(b)}function j(a,b){var c={};return c[a]=b,c}function k(a,b){return c("filter")(self.data.collection,j(n.idKey,b))[0]}function l(a){var b="";return angular.forEach(a[1],function(a,c){b+=c+a}),a[0]+b}var m=d("ng-collection"),n=this.defaults,o=authServiceName?e.get(authServiceName):{authenticate:function(){a.when(!0)}};return g.prototype.get=function(c){var d=this,e=a.defer(),f=c.id?h(d.meta.url,c.id):d.meta.url;return c=angular.copy(c||{}),c.id||angular.extend(c,d.meta.params),o.authenticate().then(function(){b.get(f,{params:c}).then(function(a){c[n.idKey]?(i(d.data.collection,a),e.resolve(angular.copy(a))):(d.data.collection=resp[n.collectionKey]||[],e.resolve(angular.copy(d.data.collection)))},function(a){e.reject(a)})},function(a){e.reject(a)}),e.promise},g.prototype.save=function(c){var d=this,e=a.defer(),f=h(d.meta.url,c[n.idKey]);return o.authenticate().then(function(){if(c[n.idKey]){j(n.idKey,c.id);b.put(f,c).then(function(a){i(d.data.collection,a),e.resolve(angular.copy(a))},function(a){e.reject(a)})}else b.post(d.meta.url,c).then(function(a){d.data.collection.push(a),e.resolve(angular.copy(a))},function(a){e.reject(a)})},function(a){e.reject(a)}),e.promise},g.prototype.remove=function(c){var d=this,e=a.defer();return o.authenticate().then(function(){b["delete"](h(d.meta.url,c[n.idKey])).then(function(){var a=k(d.data.collection,c[n.idKey]),b=d.data.collection.indexOf(a);d.data.collection.splice(b,1),e.resolve()},function(a){e.reject(a)})},function(a){e.reject(a)}),e.promise},function(a,b){var c=l(arguments),d=m.get(c);if(d)return d;var e=new g(a,b);return m.set(c,e),e}}}).provider("$resourceLibrary",function(){this.defaults={baseLinks:{}},this.$get=function(a,b){function c(a,b){a=a?a+".":"",angular.isObject(b)?b.forEach(function(b,c){e.put(a+c,b)}):angular.isArray(b)&&b.forEach(function(b){e.put(a+b.rel,b.url)})}var d=this.defaults,e=b("resource-library");return c("",d.baseLinks),{extend:c,get:e.get}}}).controller("ngCollectionCtrl",function(a,b,c,d){function e(a){return a.replace(/\./g," ").replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(a,b){return 0===+a?"":0===b?a.toLowerCase():a.toUpperCase()})}var f=c(b.ngCollection)(a);a.getEditCopy=angular.copy,angular.forEach(f,function(b){var c=d(b.resource,b.params),f=e(b.resource);a[f]=angular.extend({data:c.data,save:function(a,b,d){c.save(a).then(function(a){b&&b(a)},function(a){d&&d(a)})},remove:function(a,b,d){c.remove(a).then(function(a){b&&b(a)},function(a){d&&d(a)})}},a[f]),c.get()})}).directive("ngCollection",function(){return{restrict:"A",controller:"ngCollectionCtrl"}});
//# sourceMappingURL=ng-collection.min.map